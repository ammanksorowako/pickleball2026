import React, { useState } from 'react';
import { Trophy, Calendar, Users, Activity, CheckCircle, ClipboardList, Menu, X, ChevronRight, AlertCircle, TrendingUp } from 'lucide-react';

const App = () => {
  const [currentPage, setCurrentPage] = useState('home');
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const navigate = (page) => {
    setCurrentPage(page);
    setIsMenuOpen(false);
  };

  return (
    <div className="min-h-screen bg-gray-50 font-sans text-gray-800">
      {/* Navigation */}
      <nav className="bg-emerald-900 text-white shadow-lg sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-16">
            <div className="flex items-center gap-3 cursor-pointer" onClick={() => navigate('home')}>
              <img 
                src="https://imgur.com/s7AMXx5.png" 
                alt="SPA SOROWAKO" 
                className="h-10 w-auto object-contain" 
              />
              <span className="font-bold text-xl tracking-wider hidden sm:block">SPA SOROWAKO</span>
            </div>
            
            <div className="hidden md:block">
              <div className="ml-10 flex items-baseline space-x-4">
                <NavButton active={currentPage === 'home'} onClick={() => navigate('home')}>Beranda</NavButton>
                <NavButton active={currentPage === 'curriculum'} onClick={() => navigate('curriculum')}>Kurikulum</NavButton>
                <NavButton active={currentPage === 'assessment'} onClick={() => navigate('assessment')}>Evaluasi (Coach)</NavButton>
                <NavButton active={currentPage === 'philosophy'} onClick={() => navigate('philosophy')}>Filosofi & Kritik</NavButton>
              </div>
            </div>

            <div className="-mr-2 flex md:hidden">
              <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2 rounded-md text-gray-200 hover:text-white hover:bg-emerald-800 focus:outline-none">
                {isMenuOpen ? <X className="h-6 w-6" /> : <Menu className="h-6 w-6" />}
              </button>
            </div>
          </div>
        </div>

        {isMenuOpen && (
          <div className="md:hidden bg-emerald-800">
            <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
              <MobileNavButton onClick={() => navigate('home')}>Beranda</MobileNavButton>
              <MobileNavButton onClick={() => navigate('curriculum')}>Kurikulum</MobileNavButton>
              <MobileNavButton onClick={() => navigate('assessment')}>Evaluasi (Coach)</MobileNavButton>
              <MobileNavButton onClick={() => navigate('philosophy')}>Filosofi</MobileNavButton>
            </div>
          </div>
        )}
      </nav>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {currentPage === 'home' && <HomeView navigate={navigate} />}
        {currentPage === 'curriculum' && <CurriculumView />}
        {currentPage === 'assessment' && <AssessmentView />}
        {currentPage === 'philosophy' && <PhilosophyView />}
      </main>

      {/* Footer */}
      <footer className="bg-emerald-900 text-gray-300 py-8 mt-12">
        <div className="max-w-7xl mx-auto px-4 text-center">
          <p className="font-semibold">Sorowako Pickleball Academy (SPA)</p>
          <p className="text-sm mt-2">Basis: SMP YPS SINGKOLE | Afiliasi: IPF & KONI</p>
          <p className="text-xs mt-4 text-emerald-400">"Sport is Medicine, Pickleball is Vaccine."</p>
          <p className="text-xs mt-4 opacity-50">Developed by Pak Ammank</p>
        </div>
      </footer>
    </div>
  );
};

// --- Sub-Components ---

const NavButton = ({ children, onClick, active }) => (
  <button
    onClick={onClick}
    className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${
      active ? 'bg-emerald-800 text-white' : 'text-emerald-100 hover:bg-emerald-700 hover:text-white'
    }`}
  >
    {children}
  </button>
);

const MobileNavButton = ({ children, onClick }) => (
  <button
    onClick={onClick}
    className="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-emerald-100 hover:bg-emerald-700 hover:text-white"
  >
    {children}
  </button>
);

const HomeView = ({ navigate }) => (
  <div className="space-y-12">
    {/* Hero Section */}
    <div className="relative bg-gradient-to-r from-emerald-600 to-teal-500 rounded-3xl overflow-hidden shadow-xl text-white p-8 md:p-16 text-center md:text-left">
      <div className="md:w-2/3">
        <h1 className="text-4xl md:text-5xl font-extrabold mb-4">
          Center of Excellence Pickleball Sulawesi Selatan
        </h1>
        <p className="text-xl mb-8 text-emerald-100">
          Membangun karakter dan prestasi dari usia dini hingga lansia. Inklusif, minim cedera, namun kompetitif.
        </p>
        <div className="flex flex-col md:flex-row gap-4 justify-center md:justify-start">
          <button 
            onClick={() => navigate('curriculum')}
            className="px-6 py-3 bg-white text-emerald-700 font-bold rounded-lg shadow-md hover:bg-gray-100 transition-transform transform hover:-translate-y-1"
          >
            Lihat Kurikulum
          </button>
          <button 
            onClick={() => navigate('philosophy')}
            className="px-6 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white/10 transition-colors"
          >
            Kenapa SPA?
          </button>
        </div>
      </div>
      <div className="absolute right-0 bottom-0 opacity-20 transform translate-x-1/4 translate-y-1/4">
        <Activity size={400} />
      </div>
    </div>

    {/* Divisions */}
    <div className="grid md:grid-cols-3 gap-8">
      <ProgramCard 
        title="Divisi Junior (SD)" 
        icon={<Users className="w-10 h-10 text-emerald-600" />}
        desc="Fokus pada fun game, modifikasi alat (paddle kayu/ringan), dan pengembangan motorik dasar."
      />
      <ProgramCard 
        title="Divisi Prestasi" 
        icon={<Trophy className="w-10 h-10 text-yellow-500" />}
        desc="Untuk Remaja/Dewasa. Teknik kompleks (Dink, Drive, Overhead), strategi kompetisi, dan analisis video."
      />
      <ProgramCard 
        title="Divisi Rekreasional" 
        icon={<Activity className="w-10 h-10 text-blue-500" />}
        desc="Fokus kesehatan kardiovaskular, fungsi psikologis, dan interaksi sosial bagi lansia/umum."
      />
    </div>

    {/* Quote Section */}
    <div className="bg-gray-100 border-l-4 border-emerald-600 p-6 rounded-r-lg italic text-gray-700">
      "Akademi ini didirikan untuk merespons kebutuhan akan olahraga yang inklusif. Visi kami bukan sekadar main, tapi membangun ekosistem prestasi yang berkelanjutan."
      <div className="mt-2 font-bold not-italic text-gray-900">â€” Pak Ammank, Founder</div>
    </div>
  </div>
);

const ProgramCard = ({ title, icon, desc }) => (
  <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
    <div className="mb-4">{icon}</div>
    <h3 className="text-xl font-bold mb-2">{title}</h3>
    <p className="text-gray-600 text-sm leading-relaxed">{desc}</p>
  </div>
);

const CurriculumView = () => {
  const [activeWeek, setActiveWeek] = useState(0);
  
  const curriculum = [
    {
      week: "Minggu 1",
      theme: "Pondasi & Ball Feeling",
      focus: "Koordinasi mata-tangan dan sikap tubuh.",
      days: [
        { day: "Hari 1", topic: "Orientasi & Sejarah", detail: "Dimensi lapangan 20x44 kaki, area Kitchen." },
        { day: "Hari 2", topic: "Sikap Dasar", detail: "Grip yang benar, Ready Position (lutut ditekuk)." },
        { day: "Hari 3", topic: "Statis", detail: "Ball feeling (memantulkan bola) >30 detik tanpa jatuh." },
        { day: "Hari 4", topic: "Dinamis", detail: "Berjalan sambil memantulkan bola. Transisi gerak." },
        { day: "Hari 5", topic: "Evaluasi", detail: "Relay Pickleball Game & Tes keseimbangan." },
      ]
    },
    {
      week: "Minggu 2",
      theme: "The Start of Play",
      focus: "Memulai permainan secara legal.",
      days: [
        { day: "Hari 1", topic: "Mekanika Servis", detail: "Ayunan bawah pinggang, gerakan melengkung ke atas." },
        { day: "Hari 2", topic: "Geometri", detail: "Servis diagonal & aturan foot fault." },
        { day: "Hari 3", topic: "Drop Serve", detail: "Teknik menjatuhkan bola (opsi aturan baru)." },
        { day: "Hari 4", topic: "Return", detail: "Mengembalikan servis dengan Drive ke belakang." },
        { day: "Hari 5", topic: "Simulasi", detail: "Game poin terbatas (hanya servis & return)." },
      ]
    },
    {
      week: "Minggu 3",
      theme: "The Soft Game (Dink)",
      focus: "Strategi unik Pickleball di depan net.",
      days: [
        { day: "Hari 1", topic: "Teknik Dink", detail: "Pukulan lembut parabola pendek ke Kitchen." },
        { day: "Hari 2", topic: "Aturan NVZ", detail: "Disiplin kaki tidak injak garis Kitchen saat volley." },
        { day: "Hari 3", topic: "Cross-Court", detail: "Dink menyilang untuk membuka ruang." },
        { day: "Hari 4", topic: "Patience", detail: "Reli panjang. Menahan keinginan memukul keras." },
        { day: "Hari 5", topic: "Mini-Tournament", detail: "Game khusus area net." },
      ]
    },
    {
      week: "Minggu 4",
      theme: "Power & Defense",
      focus: "Menyelesaikan poin dan transisi.",
      days: [
        { day: "Hari 1", topic: "Drive", detail: "Groundstroke lurus kencang dari baseline." },
        { day: "Hari 2", topic: "Volley", detail: "Menyergap bola di udara (di belakang garis NVZ)." },
        { day: "Hari 3", topic: "Overhead/Lob", detail: "Smash bola tinggi dan Lob defensif." },
        { day: "Hari 4", topic: "Transisi", detail: "Bergerak maju dari baseline ke Kitchen line." },
        { day: "Hari 5", topic: "UJIAN LEVEL 1", detail: "Tes teknis dan turnamen internal." },
      ]
    }
  ];

  return (
    <div className="space-y-6">
      <div className="text-center mb-8">
        <h2 className="text-3xl font-bold text-gray-900">Kurikulum Bulan Pertama</h2>
        <p className="text-emerald-600 font-medium">Tema: Pickleball Foundations</p>
      </div>

      <div className="flex overflow-x-auto gap-2 pb-4 md:justify-center">
        {curriculum.map((item, index) => (
          <button
            key={index}
            onClick={() => setActiveWeek(index)}
            className={`px-6 py-2 rounded-full whitespace-nowrap transition-all ${
              activeWeek === index 
                ? 'bg-emerald-600 text-white shadow-lg scale-105' 
                : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
            }`}
          >
            {item.week}
          </button>
        ))}
      </div>

      <div className="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div className="bg-emerald-50 p-6 border-b border-emerald-100">
          <h3 className="text-2xl font-bold text-emerald-900">{curriculum[activeWeek].theme}</h3>
          <p className="text-emerald-700 mt-2 flex items-center gap-2">
            <TrendingUp size={18} /> Fokus: {curriculum[activeWeek].focus}
          </p>
        </div>
        <div className="divide-y divide-gray-100">
          {curriculum[activeWeek].days.map((day, idx) => (
            <div key={idx} className="p-5 hover:bg-gray-50 transition-colors flex items-start gap-4">
              <div className="bg-emerald-100 text-emerald-800 font-bold px-3 py-1 rounded text-sm shrink-0">
                {day.day}
              </div>
              <div>
                <h4 className="font-bold text-gray-900">{day.topic}</h4>
                <p className="text-gray-600 text-sm mt-1">{day.detail}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

const AssessmentView = () => {
  // Assessment logic specific to Part IV of the PDF
  const [scores, setScores] = useState({
    mekanika: 0,
    kontrol: 0,
    servis: 0,
    aturan: 0,
    etika: 0
  });
  const [studentName, setStudentName] = useState('');
  const [notes, setNotes] = useState('');
  const [showResult, setShowResult] = useState(false);

  const handleScoreChange = (category, value) => {
    setScores(prev => ({ ...prev, [category]: parseInt(value) }));
  };

  const calculateTotal = () => {
    const values = Object.values(scores);
    const sum = values.reduce((a, b) => a + b, 0);
    return (sum / values.length).toFixed(1); // Average score
  };

  const getStatus = (avg) => {
    if (avg >= 3.5) return { label: "Lulus - Memuaskan", color: "text-emerald-600" };
    if (avg >= 2.5) return { label: "Lulus - Cukup", color: "text-blue-600" };
    return { label: "Belum Lulus - Remedial", color: "text-red-600" };
  };

  return (
    <div className="max-w-3xl mx-auto">
      <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6 md:p-8">
        <div className="flex items-center gap-3 mb-6 pb-6 border-b border-gray-100">
          <ClipboardList className="w-8 h-8 text-emerald-600" />
          <div>
            <h2 className="text-2xl font-bold text-gray-900">Instrumen Evaluasi Level 1</h2>
            <p className="text-gray-500 text-sm">Berdasarkan Dokumen Induk (Bagian IV)</p>
          </div>
        </div>

        {!showResult ? (
          <div className="space-y-6">
             <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">Nama Atlet</label>
              <input 
                type="text" 
                className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-emerald-500 outline-none"
                placeholder="Masukkan nama siswa..."
                value={studentName}
                onChange={(e) => setStudentName(e.target.value)}
              />
            </div>

            <div className="grid gap-6">
              <ScoreInput 
                label="Mekanika Dasar" 
                desc="Konsistensi grip & ready position (lutut ditekuk)."
                value={scores.mekanika}
                onChange={(v) => handleScoreChange('mekanika', v)}
              />
              <ScoreInput 
                label="Kontrol Bola" 
                desc="Ball feeling statis >30 detik & dinamis tanpa jatuh."
                value={scores.kontrol}
                onChange={(v) => handleScoreChange('kontrol', v)}
              />
              <ScoreInput 
                label="Servis & Return" 
                desc="Servis diagonal masuk; Return tidak menyangkut net."
                value={scores.servis}
                onChange={(v) => handleScoreChange('servis', v)}
              />
              <ScoreInput 
                label="Pemahaman Aturan" 
                desc="Mengetahui larangan volley di Kitchen & skor."
                value={scores.aturan}
                onChange={(v) => handleScoreChange('aturan', v)}
              />
              <ScoreInput 
                label="Etika & Karakter" 
                desc="Sportsmanship, disiplin waktu, & grit."
                value={scores.etika}
                onChange={(v) => handleScoreChange('etika', v)}
              />
            </div>

            <div className="bg-yellow-50 p-4 rounded-md border border-yellow-200">
              <label className="block text-sm font-bold text-yellow-800 mb-1">Catatan Kritis Pelatih (Wajib)</label>
              <p className="text-xs text-yellow-700 mb-2">Hindari pujian kosong. Berikan koreksi teknis spesifik.</p>
              <textarea 
                className="w-full p-2 border border-yellow-300 rounded bg-white text-sm"
                rows="3"
                placeholder="Contoh: Kaki masih terlalu lurus saat dink, perlu latihan squat..."
                value={notes}
                onChange={(e) => setNotes(e.target.value)}
              ></textarea>
            </div>

            <button 
              onClick={() => setShowResult(true)}
              disabled={!studentName || !notes}
              className="w-full py-3 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
            >
              Generate Rapor Digital
            </button>
          </div>
        ) : (
          <div className="text-center animate-in fade-in zoom-in duration-300">
            <div className="mb-6">
              <Trophy className="w-16 h-16 text-yellow-500 mx-auto mb-4" />
              <h3 className="text-2xl font-bold text-gray-900">Hasil Evaluasi Level 1</h3>
              <p className="text-lg text-gray-600 mt-1">{studentName}</p>
            </div>

            <div className="bg-gray-50 p-6 rounded-xl mb-6">
              <div className="grid grid-cols-2 gap-4 text-left text-sm mb-4">
                <div className="flex justify-between border-b pb-1"><span>Mekanika:</span> <span className="font-bold">{scores.mekanika}/4</span></div>
                <div className="flex justify-between border-b pb-1"><span>Kontrol:</span> <span className="font-bold">{scores.kontrol}/4</span></div>
                <div className="flex justify-between border-b pb-1"><span>Servis:</span> <span className="font-bold">{scores.servis}/4</span></div>
                <div className="flex justify-between border-b pb-1"><span>Aturan:</span> <span className="font-bold">{scores.aturan}/4</span></div>
                <div className="flex justify-between border-b pb-1"><span>Etika:</span> <span className="font-bold">{scores.etika}/4</span></div>
              </div>
              <div className="text-xl font-bold mt-4">
                Skor Rata-rata: <span className="text-emerald-600">{calculateTotal()}</span>
              </div>
              <div className={`text-lg font-bold mt-1 ${getStatus(calculateTotal()).color}`}>
                Status: {getStatus(calculateTotal()).label}
              </div>
            </div>

            <div className="text-left bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6">
              <h4 className="font-bold text-blue-800 text-sm mb-1">Catatan Pelatih:</h4>
              <p className="text-blue-900 text-sm italic">"{notes}"</p>
            </div>

            <div className="flex gap-3">
              <button 
                onClick={() => setShowResult(false)}
                className="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium"
              >
                Edit / Kembali
              </button>
              <button 
                onClick={() => window.print()}
                className="flex-1 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium"
              >
                Cetak / Simpan PDF
              </button>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

const ScoreInput = ({ label, desc, value, onChange }) => (
  <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-3 bg-gray-50 rounded-lg">
    <div className="flex-1">
      <h4 className="font-bold text-gray-800">{label}</h4>
      <p className="text-xs text-gray-500">{desc}</p>
    </div>
    <div className="flex items-center gap-2">
      {[1, 2, 3, 4].map((score) => (
        <button
          key={score}
          onClick={() => onChange(score)}
          className={`w-10 h-10 rounded-full font-bold transition-all ${
            value === score 
              ? 'bg-emerald-600 text-white shadow-md scale-110' 
              : 'bg-white text-gray-400 border border-gray-200 hover:border-emerald-300'
          }`}
        >
          {score}
        </button>
      ))}
    </div>
  </div>
);

const PhilosophyView = () => (
  <div className="space-y-8">
    <div className="bg-white p-8 rounded-xl shadow-md">
      <h2 className="text-2xl font-bold mb-6 text-emerald-900 border-b pb-2">Intellectual Sparring: Kritik & Solusi</h2>
      <p className="mb-6 text-gray-600">
        Bagian ini memuat transparansi operasional SPA dalam menjaga kualitas, bukan sekadar kuantitas.
      </p>
      
      <div className="grid md:grid-cols-2 gap-6">
        <CritiqueCard 
          problem="Dilema Eksklusivitas (Sekolah vs Komersial)"
          solution="Pemisahan jelas. Sekolah fokus pengenalan massal. Akademi berbayar menawarkan 'Elite Training' (Rasio pelatih kecil, analisis video, turnamen software)."
        />
        <CritiqueCard 
          problem="Integritas Sertifikasi (Sertifikat 'Kertas')"
          solution="Penerapan tes ketat. Kelulusan tidak diobral. Siswa harus gagal jika belum kompeten demi menjaga reputasi sertifikat SPA."
        />
        <CritiqueCard 
          problem="Kualifikasi Pelatih & Risiko Cedera"
          solution="Wajib sertifikasi IPF atau coaching clinic resmi. Audit teknik berkala agar tidak mengajarkan biomekanika yang salah pada anak."
        />
        <CritiqueCard 
          problem="Disiplin Aturan (Kitchen)"
          solution="Penekanan aturan NVZ sejak hari pertama. Ini yang membedakan Pickleball dengan tenis mini. Tanpa disiplin ini, taktik permainan hilang."
        />
      </div>
    </div>

    <div className="bg-emerald-900 text-white p-8 rounded-xl text-center">
      <h3 className="text-xl font-bold mb-4">Bergabunglah dengan Visi Kami</h3>
      <p className="mb-6 opacity-90">
        Kami mencari mitra yang siap berdebat demi kualitas, bukan sekadar setuju demi kenyamanan.
      </p>
      <div className="inline-block bg-white/10 px-6 py-3 rounded-lg border border-white/20">
        <p className="font-mono text-sm">Hubungi: Abdul Rahman (Pak Ammank) | SMP YPS Singkole</p>
      </div>
    </div>
  </div>
);

const CritiqueCard = ({ problem, solution }) => (
  <div className="bg-gray-50 p-5 rounded-lg border-l-4 border-red-400">
    <h4 className="font-bold text-gray-900 flex items-center gap-2 mb-2">
      <AlertCircle size={16} className="text-red-500" /> Masalah: {problem}
    </h4>
    <p className="text-gray-600 text-sm mb-3 border-b border-gray-200 pb-2"></p>
    <h4 className="font-bold text-emerald-700 flex items-center gap-2 mb-1">
      <CheckCircle size={16} /> Solusi SPA:
    </h4>
    <p className="text-gray-700 text-sm">{solution}</p>
  </div>
);

export default App;
