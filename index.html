<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorowako Pickleball Academy (SPA)</title>
    <!-- Tailwind CSS (CDN untuk standalone) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom print styles */
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white; }
            .shadow-lg, .shadow-xl { box-shadow: none !important; }
            /* Pastikan konten utama memenuhi lebar kertas */
            main { width: 100% !important; margin: 0 !important; padding: 0 !important; }
            /* Sembunyikan elemen lain yang tidak perlu saat cetak */
            #assessment-form, #mobile-menu { display: none !important; }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-800">

    <!-- Navigation -->
    <nav class="bg-emerald-900 text-white shadow-lg sticky top-0 z-50 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center gap-3 cursor-pointer" onclick="navigateTo('home')">
                    <img src="https://imgur.com/s7AMXx5.png" alt="SPA SOROWAKO" class="h-10 w-auto object-contain">
                    <span class="font-bold text-xl tracking-wider hidden sm:block">SPA SOROWAKO</span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="navigateTo('home')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors bg-emerald-800 text-white" data-target="home">Beranda</button>
                        <button onclick="navigateTo('curriculum')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors text-emerald-100 hover:bg-emerald-700 hover:text-white" data-target="curriculum">Kurikulum</button>
                        <button onclick="navigateTo('assessment')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors text-emerald-100 hover:bg-emerald-700 hover:text-white" data-target="assessment">Evaluasi (Coach)</button>
                        <button onclick="navigateTo('philosophy')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors text-emerald-100 hover:bg-emerald-700 hover:text-white" data-target="philosophy">Filosofi & Kritik</button>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="-mr-2 flex md:hidden">
                    <button onclick="toggleMobileMenu()" class="p-2 rounded-md text-gray-200 hover:text-white hover:bg-emerald-800 focus:outline-none">
                        <i data-lucide="menu" class="h-6 w-6"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-emerald-800">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <button onclick="navigateTo('home')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-emerald-100 hover:bg-emerald-700 hover:text-white">Beranda</button>
                <button onclick="navigateTo('curriculum')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-emerald-100 hover:bg-emerald-700 hover:text-white">Kurikulum</button>
                <button onclick="navigateTo('assessment')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-emerald-100 hover:bg-emerald-700 hover:text-white">Evaluasi (Coach)</button>
                <button onclick="navigateTo('philosophy')" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-emerald-100 hover:bg-emerald-700 hover:text-white">Filosofi</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen">
        
        <!-- HOME VIEW -->
        <section id="view-home" class="page-view space-y-12">
            <!-- Hero -->
            <div class="relative bg-gradient-to-r from-emerald-600 to-teal-500 rounded-3xl overflow-hidden shadow-xl text-white p-8 md:p-16 text-center md:text-left">
                <div class="md:w-2/3 relative z-10">
                    <h1 class="text-4xl md:text-5xl font-extrabold mb-4">Center of Excellence Pickleball Sulawesi Selatan</h1>
                    <p class="text-xl mb-8 text-emerald-100">Membangun karakter dan prestasi dari usia dini hingga lansia. Inklusif, minim cedera, namun kompetitif.</p>
                    <div class="flex flex-col md:flex-row gap-4 justify-center md:justify-start">
                        <button onclick="navigateTo('curriculum')" class="px-6 py-3 bg-white text-emerald-700 font-bold rounded-lg shadow-md hover:bg-gray-100 transition-transform transform hover:-translate-y-1">Lihat Kurikulum</button>
                        <button onclick="navigateTo('philosophy')" class="px-6 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white/10 transition-colors">Kenapa SPA?</button>
                    </div>
                </div>
                <div class="absolute right-0 bottom-0 opacity-20 transform translate-x-1/4 translate-y-1/4">
                    <i data-lucide="activity" width="400" height="400"></i>
                </div>
            </div>

            <!-- Programs -->
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Junior -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="mb-4"><i data-lucide="users" class="w-10 h-10 text-emerald-600"></i></div>
                    <h3 class="text-xl font-bold mb-2">Divisi Junior (SD)</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Fokus pada fun game, modifikasi alat (paddle kayu/ringan), dan pengembangan motorik dasar.</p>
                </div>
                <!-- Prestasi -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="mb-4"><i data-lucide="trophy" class="w-10 h-10 text-yellow-500"></i></div>
                    <h3 class="text-xl font-bold mb-2">Divisi Prestasi</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Untuk Remaja/Dewasa. Teknik kompleks (Dink, Drive, Overhead), strategi kompetisi, dan analisis video.</p>
                </div>
                <!-- Rekreasional -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                    <div class="mb-4"><i data-lucide="activity" class="w-10 h-10 text-blue-500"></i></div>
                    <h3 class="text-xl font-bold mb-2">Divisi Rekreasional</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Fokus kesehatan kardiovaskular, fungsi psikologis, dan interaksi sosial bagi lansia/umum.</p>
                </div>
            </div>

            <!-- Quote -->
            <div class="bg-gray-100 border-l-4 border-emerald-600 p-6 rounded-r-lg italic text-gray-700">
                "Akademi ini didirikan untuk merespons kebutuhan akan olahraga yang inklusif. Visi kami bukan sekadar main, tapi membangun ekosistem prestasi yang berkelanjutan."
                <div class="mt-2 font-bold not-italic text-gray-900">â€” Pak Ammank, Founder</div>
            </div>
        </section>

        <!-- CURRICULUM VIEW -->
        <section id="view-curriculum" class="page-view hidden space-y-6">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Kurikulum Bulan Pertama</h2>
                <p class="text-emerald-600 font-medium">Tema: Pickleball Foundations</p>
            </div>

            <!-- Tabs -->
            <div class="flex overflow-x-auto gap-2 pb-4 md:justify-center" id="curriculum-tabs">
                <!-- Tab buttons generated by JS -->
            </div>

            <!-- Content -->
            <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
                <div class="bg-emerald-50 p-6 border-b border-emerald-100">
                    <h3 class="text-2xl font-bold text-emerald-900" id="curr-theme-title">Theme Title</h3>
                    <p class="text-emerald-700 mt-2 flex items-center gap-2">
                        <i data-lucide="trending-up" size="18"></i> Fokus: <span id="curr-focus-text">Focus Text</span>
                    </p>
                </div>
                <div class="divide-y divide-gray-100" id="curr-days-container">
                    <!-- Days content generated by JS -->
                </div>
            </div>
        </section>

        <!-- ASSESSMENT VIEW -->
        <section id="view-assessment" class="page-view hidden max-w-3xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6 pb-6 border-b border-gray-100 no-print">
                    <i data-lucide="clipboard-list" class="w-8 h-8 text-emerald-600"></i>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900">Instrumen Evaluasi Level 1</h2>
                        <p class="text-gray-500 text-sm">Berdasarkan Dokumen Induk (Bagian IV)</p>
                    </div>
                </div>

                <!-- Input Form -->
                <div id="assessment-form" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Atlet</label>
                        <input type="text" id="student-name" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-emerald-500 outline-none" placeholder="Masukkan nama siswa...">
                    </div>

                    <div class="grid gap-6" id="score-inputs">
                        <!-- Score Items Generated by JS -->
                    </div>

                    <div class="bg-yellow-50 p-4 rounded-md border border-yellow-200">
                        <label class="block text-sm font-bold text-yellow-800 mb-1">Catatan Kritis Pelatih (Wajib)</label>
                        <p class="text-xs text-yellow-700 mb-2">Hindari pujian kosong. Berikan koreksi teknis spesifik.</p>
                        <textarea id="coach-notes" class="w-full p-2 border border-yellow-300 rounded bg-white text-sm" rows="3" placeholder="Contoh: Kaki masih terlalu lurus saat dink, perlu latihan squat..."></textarea>
                    </div>

                    <button onclick="generateReport()" id="btn-generate" class="w-full py-3 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed">
                        Generate Rapor Digital
                    </button>
                </div>

                <!-- Result View (Hidden initially) -->
                <div id="assessment-result" class="hidden text-center">
                    <div class="mb-6">
                        <i data-lucide="trophy" class="w-16 h-16 text-yellow-500 mx-auto mb-4"></i>
                        <h3 class="text-2xl font-bold text-gray-900">Hasil Evaluasi Level 1</h3>
                        <p class="text-lg text-gray-600 mt-1" id="result-name">Nama Siswa</p>
                    </div>

                    <div class="bg-gray-50 p-6 rounded-xl mb-6 text-left">
                        <div class="grid grid-cols-2 gap-4 text-sm mb-4" id="result-details">
                            <!-- Details filled by JS -->
                        </div>
                        <div class="text-xl font-bold mt-4">
                            Skor Rata-rata: <span class="text-emerald-600" id="result-average">0.0</span>
                        </div>
                        <div class="text-lg font-bold mt-1" id="result-status">
                            Status: -
                        </div>
                    </div>

                    <div class="text-left bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6">
                        <h4 class="font-bold text-blue-800 text-sm mb-1">Catatan Pelatih:</h4>
                        <p class="text-blue-900 text-sm italic" id="result-notes">"..."</p>
                    </div>

                    <div class="flex gap-3 no-print">
                        <button onclick="editAssessment()" class="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium">Edit / Kembali</button>
                        <button onclick="handlePrint()" id="print-btn" class="flex-1 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 font-medium">Cetak / Simpan PDF</button>
                    </div>
                    
                    <!-- Footer for Print -->
                    <div class="hidden print-only mt-12 text-center text-xs text-gray-400">
                         <p>Dicetak dari Sistem Manajemen SPA Sorowako</p>
                         <p>Pelatih: Abdul Rahman, S.Pd., M.Pd.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHILOSOPHY VIEW -->
        <section id="view-philosophy" class="page-view hidden space-y-8">
            <div class="bg-white p-8 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold mb-6 text-emerald-900 border-b pb-2">Intellectual Sparring: Kritik & Solusi</h2>
                <p class="mb-6 text-gray-600">Bagian ini memuat transparansi operasional SPA dalam menjaga kualitas, bukan sekadar kuantitas.</p>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Card 1 -->
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-gray-900 flex items-center gap-2 mb-2">
                            <i data-lucide="alert-circle" class="w-4 h-4 text-red-500"></i> Masalah: Dilema Eksklusivitas
                        </h4>
                        <p class="text-gray-600 text-sm mb-3 border-b border-gray-200 pb-2">Sekolah vs Komersial</p>
                        <h4 class="font-bold text-emerald-700 flex items-center gap-2 mb-1">
                            <i data-lucide="check-circle" class="w-4 h-4"></i> Solusi SPA:
                        </h4>
                        <p class="text-gray-700 text-sm">Pemisahan jelas. Sekolah fokus pengenalan massal. Akademi berbayar menawarkan 'Elite Training' (Rasio pelatih kecil, analisis video, turnamen software).</p>
                    </div>
                    <!-- Card 2 -->
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-gray-900 flex items-center gap-2 mb-2">
                            <i data-lucide="alert-circle" class="w-4 h-4 text-red-500"></i> Masalah: Integritas Sertifikasi
                        </h4>
                        <p class="text-gray-600 text-sm mb-3 border-b border-gray-200 pb-2">Sertifikat hanya jadi 'Kertas'</p>
                        <h4 class="font-bold text-emerald-700 flex items-center gap-2 mb-1">
                            <i data-lucide="check-circle" class="w-4 h-4"></i> Solusi SPA:
                        </h4>
                        <p class="text-gray-700 text-sm">Penerapan tes ketat. Kelulusan tidak diobral. Siswa harus gagal jika belum kompeten demi menjaga reputasi sertifikat SPA.</p>
                    </div>
                    <!-- Card 3 -->
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-gray-900 flex items-center gap-2 mb-2">
                            <i data-lucide="alert-circle" class="w-4 h-4 text-red-500"></i> Masalah: Kualifikasi Pelatih
                        </h4>
                        <p class="text-gray-600 text-sm mb-3 border-b border-gray-200 pb-2">Risiko teknik salah & cedera</p>
                        <h4 class="font-bold text-emerald-700 flex items-center gap-2 mb-1">
                            <i data-lucide="check-circle" class="w-4 h-4"></i> Solusi SPA:
                        </h4>
                        <p class="text-gray-700 text-sm">Wajib sertifikasi IPF atau coaching clinic resmi. Audit teknik berkala agar tidak mengajarkan biomekanika yang salah pada anak.</p>
                    </div>
                    <!-- Card 4 -->
                    <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-red-400">
                        <h4 class="font-bold text-gray-900 flex items-center gap-2 mb-2">
                            <i data-lucide="alert-circle" class="w-4 h-4 text-red-500"></i> Masalah: Disiplin Aturan (Kitchen)
                        </h4>
                        <p class="text-gray-600 text-sm mb-3 border-b border-gray-200 pb-2">Sering diabaikan pemula</p>
                        <h4 class="font-bold text-emerald-700 flex items-center gap-2 mb-1">
                            <i data-lucide="check-circle" class="w-4 h-4"></i> Solusi SPA:
                        </h4>
                        <p class="text-gray-700 text-sm">Penekanan aturan NVZ sejak hari pertama. Ini yang membedakan Pickleball dengan tenis mini. Tanpa disiplin ini, taktik permainan hilang.</p>
                    </div>
                </div>
            </div>

            <div class="bg-emerald-900 text-white p-8 rounded-xl text-center">
                <h3 class="text-xl font-bold mb-4">Bergabunglah dengan Visi Kami</h3>
                <p class="mb-6 opacity-90">Kami mencari mitra yang siap berdebat demi kualitas, bukan sekadar setuju demi kenyamanan.</p>
                <div class="inline-block bg-white/10 px-6 py-3 rounded-lg border border-white/20">
                    <p class="font-mono text-sm">Hubungi: Abdul Rahman (Pak Ammank) | SMP YPS Singkole</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-emerald-900 text-gray-300 py-8 mt-12 no-print">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-semibold">Sorowako Pickleball Academy (SPA)</p>
            <p class="text-sm mt-2">Basis: SMP YPS SINGKOLE | Afiliasi: IPF & KONI</p>
            <p class="text-xs mt-4 text-emerald-400">"Sport is Medicine, Pickleball is Vaccine."</p>
            <p class="text-xs mt-4 opacity-50">Developed by Pak Ammank</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. ICON INITIALIZATION ---
        lucide.createIcons();

        // --- 2. NAVIGATION LOGIC ---
        function navigateTo(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-view').forEach(el => el.classList.add('hidden'));
            
            // Show target page
            const target = document.getElementById(`view-${pageId}`);
            if(target) target.classList.remove('hidden');

            // Update Nav Buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.dataset.target === pageId) {
                    btn.classList.remove('text-emerald-100', 'hover:bg-emerald-700');
                    btn.classList.add('bg-emerald-800', 'text-white');
                } else {
                    btn.classList.add('text-emerald-100', 'hover:bg-emerald-700');
                    btn.classList.remove('bg-emerald-800', 'text-white');
                }
            });

            // Close Mobile Menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- 3. CURRICULUM LOGIC ---
        const curriculumData = [
            {
                week: "Minggu 1",
                theme: "Pondasi & Ball Feeling",
                focus: "Koordinasi mata-tangan dan sikap tubuh.",
                days: [
                    { day: "Hari 1", topic: "Orientasi & Sejarah", detail: "Dimensi lapangan 20x44 kaki, area Kitchen." },
                    { day: "Hari 2", topic: "Sikap Dasar", detail: "Grip yang benar, Ready Position (lutut ditekuk)." },
                    { day: "Hari 3", topic: "Statis", detail: "Ball feeling (memantulkan bola) >30 detik tanpa jatuh." },
                    { day: "Hari 4", topic: "Dinamis", detail: "Berjalan sambil memantulkan bola. Transisi gerak." },
                    { day: "Hari 5", topic: "Evaluasi", detail: "Relay Pickleball Game & Tes keseimbangan." },
                ]
            },
            {
                week: "Minggu 2",
                theme: "The Start of Play",
                focus: "Memulai permainan secara legal.",
                days: [
                    { day: "Hari 1", topic: "Mekanika Servis", detail: "Ayunan bawah pinggang, gerakan melengkung ke atas." },
                    { day: "Hari 2", topic: "Geometri", detail: "Servis diagonal & aturan foot fault." },
                    { day: "Hari 3", topic: "Drop Serve", detail: "Teknik menjatuhkan bola (opsi aturan baru)." },
                    { day: "Hari 4", topic: "Return", detail: "Mengembalikan servis dengan Drive ke belakang." },
                    { day: "Hari 5", topic: "Simulasi", detail: "Game poin terbatas (hanya servis & return)." },
                ]
            },
            {
                week: "Minggu 3",
                theme: "The Soft Game (Dink)",
                focus: "Strategi unik Pickleball di depan net.",
                days: [
                    { day: "Hari 1", topic: "Teknik Dink", detail: "Pukulan lembut parabola pendek ke Kitchen." },
                    { day: "Hari 2", topic: "Aturan NVZ", detail: "Disiplin kaki tidak injak garis Kitchen saat volley." },
                    { day: "Hari 3", topic: "Cross-Court", detail: "Dink menyilang untuk membuka ruang." },
                    { day: "Hari 4", topic: "Patience", detail: "Reli panjang. Menahan keinginan memukul keras." },
                    { day: "Hari 5", topic: "Mini-Tournament", detail: "Game khusus area net." },
                ]
            },
            {
                week: "Minggu 4",
                theme: "Power & Defense",
                focus: "Menyelesaikan poin dan transisi.",
                days: [
                    { day: "Hari 1", topic: "Drive", detail: "Groundstroke lurus kencang dari baseline." },
                    { day: "Hari 2", topic: "Volley", detail: "Menyergap bola di udara (di belakang garis NVZ)." },
                    { day: "Hari 3", topic: "Overhead/Lob", detail: "Smash bola tinggi dan Lob defensif." },
                    { day: "Hari 4", topic: "Transisi", detail: "Bergerak maju dari baseline ke Kitchen line." },
                    { day: "Hari 5", topic: "UJIAN LEVEL 1", detail: "Tes teknis dan turnamen internal." },
                ]
            }
        ];

        function renderCurriculum(weekIndex) {
            const current = curriculumData[weekIndex];
            
            // Render Tabs
            const tabsContainer = document.getElementById('curriculum-tabs');
            tabsContainer.innerHTML = curriculumData.map((item, idx) => `
                <button onclick="renderCurriculum(${idx})" 
                    class="px-6 py-2 rounded-full whitespace-nowrap transition-all ${
                        idx === weekIndex 
                        ? 'bg-emerald-600 text-white shadow-lg scale-105' 
                        : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
                    }">
                    ${item.week}
                </button>
            `).join('');

            // Render Content
            document.getElementById('curr-theme-title').innerText = current.theme;
            document.getElementById('curr-focus-text').innerText = current.focus;
            
            const daysContainer = document.getElementById('curr-days-container');
            daysContainer.innerHTML = current.days.map(day => `
                <div class="p-5 hover:bg-gray-50 transition-colors flex items-start gap-4">
                    <div class="bg-emerald-100 text-emerald-800 font-bold px-3 py-1 rounded text-sm shrink-0">
                        ${day.day}
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900">${day.topic}</h4>
                        <p class="text-gray-600 text-sm mt-1">${day.detail}</p>
                    </div>
                </div>
            `).join('');
            
            lucide.createIcons(); // Re-init icons if any (none in dynamic part currently but good practice)
        }

        // --- 4. ASSESSMENT LOGIC ---
        const scoreCategories = [
            { id: 'mekanika', label: 'Mekanika Dasar', desc: 'Konsistensi grip & ready position (lutut ditekuk).' },
            { id: 'kontrol', label: 'Kontrol Bola', desc: 'Ball feeling statis >30 detik & dinamis tanpa jatuh.' },
            { id: 'servis', label: 'Servis & Return', desc: 'Servis diagonal masuk; Return tidak menyangkut net.' },
            { id: 'aturan', label: 'Pemahaman Aturan', desc: 'Mengetahui larangan volley di Kitchen & skor.' },
            { id: 'etika', label: 'Etika & Karakter', desc: 'Sportsmanship, disiplin waktu, & grit.' }
        ];

        const scores = { mekanika: 0, kontrol: 0, servis: 0, aturan: 0, etika: 0 };

        function initAssessment() {
            const container = document.getElementById('score-inputs');
            container.innerHTML = scoreCategories.map(cat => `
                <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-3 bg-gray-50 rounded-lg">
                    <div class="flex-1">
                        <h4 class="font-bold text-gray-800">${cat.label}</h4>
                        <p class="text-xs text-gray-500">${cat.desc}</p>
                    </div>
                    <div class="flex items-center gap-2">
                        ${[1,2,3,4].map(num => `
                            <button onclick="setScore('${cat.id}', ${num})" 
                                id="btn-${cat.id}-${num}"
                                class="score-btn-${cat.id} w-10 h-10 rounded-full font-bold transition-all bg-white text-gray-400 border border-gray-200 hover:border-emerald-300">
                                ${num}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            // Add Input Listeners for Validation
            document.getElementById('student-name').addEventListener('input', validateForm);
            document.getElementById('coach-notes').addEventListener('input', validateForm);
        }

        function setScore(category, value) {
            scores[category] = value;
            
            // Visual Update
            document.querySelectorAll(`.score-btn-${category}`).forEach(btn => {
                btn.className = `score-btn-${category} w-10 h-10 rounded-full font-bold transition-all bg-white text-gray-400 border border-gray-200 hover:border-emerald-300`;
            });
            const activeBtn = document.getElementById(`btn-${category}-${value}`);
            activeBtn.className = `score-btn-${category} w-10 h-10 rounded-full font-bold transition-all bg-emerald-600 text-white shadow-md scale-110`;

            validateForm();
        }

        function validateForm() {
            const name = document.getElementById('student-name').value;
            const notes = document.getElementById('coach-notes').value;
            const allScoresFilled = Object.values(scores).every(s => s > 0);
            const btn = document.getElementById('btn-generate');

            if(name && notes && allScoresFilled) {
                btn.disabled = false;
                btn.classList.remove('bg-gray-300', 'cursor-not-allowed');
                btn.classList.add('bg-emerald-600', 'hover:bg-emerald-700');
            } else {
                btn.disabled = true;
                btn.classList.add('bg-gray-300', 'cursor-not-allowed');
                btn.classList.remove('bg-emerald-600', 'hover:bg-emerald-700');
            }
        }

        function generateReport() {
            // Calculate Logic
            const total = Object.values(scores).reduce((a, b) => a + b, 0);
            const avg = (total / 5).toFixed(1);
            let status = "", statusColor = "";

            if (avg >= 3.5) { status = "Lulus - Memuaskan"; statusColor = "text-emerald-600"; }
            else if (avg >= 2.5) { status = "Lulus - Cukup"; statusColor = "text-blue-600"; }
            else { status = "Belum Lulus - Remedial"; statusColor = "text-red-600"; }

            // Populate View
            document.getElementById('result-name').innerText = document.getElementById('student-name').value;
            document.getElementById('result-notes').innerText = `"${document.getElementById('coach-notes').value}"`;
            
            const detailsHtml = scoreCategories.map(cat => `
                <div class="flex justify-between border-b pb-1"><span>${cat.label}:</span> <span class="font-bold">${scores[cat.id]}/4</span></div>
            `).join('');
            document.getElementById('result-details').innerHTML = detailsHtml;

            document.getElementById('result-average').innerText = avg;
            const statusEl = document.getElementById('result-status');
            statusEl.innerText = `Status: ${status}`;
            statusEl.className = `text-lg font-bold mt-1 ${statusColor}`;

            // Switch Views
            document.getElementById('assessment-form').classList.add('hidden');
            document.getElementById('assessment-result').classList.remove('hidden');
        }

        function editAssessment() {
            document.getElementById('assessment-form').classList.remove('hidden');
            document.getElementById('assessment-result').classList.add('hidden');
        }

        // --- 5. PRINT LOGIC ---
        function handlePrint() {
            const btn = document.getElementById('print-btn');
            const originalText = btn.innerText;
            
            // 1. Beri umpan balik visual bahwa tombol ditekan
            btn.innerText = "Membuka Dialog Cetak...";
            btn.classList.add('opacity-75', 'cursor-wait');

            // 2. Delay sedikit untuk memastikan browser siap
            setTimeout(() => {
                try {
                    // Fokuskan window (trik agar iframe bisa memanggil print)
                    window.focus();
                    window.print();
                } catch (e) {
                    alert("Browser memblokir pencetakan otomatis. Silakan tekan Ctrl + P secara manual.");
                } finally {
                    // Kembalikan tombol seperti semula setelah dialog muncul/tutup
                    setTimeout(() => {
                        btn.innerText = originalText;
                        btn.classList.remove('opacity-75', 'cursor-wait');
                    }, 1000);
                }
            }, 500);
        }

        // --- INIT ---
        window.onload = function() {
            renderCurriculum(0);
            initAssessment();
        };

    </script>
</body>
</html>
